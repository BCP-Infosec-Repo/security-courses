\documentclass[Screen16to9,17pt]{foils}
\usepackage{zencurity-slides}

\externaldocument{system-security-exercises}
\selectlanguage{english}

\begin{document}

\mytitlepage
{11. System Security in Practice}
{KEA Kompetence Computer Systems Security 2019}


\slide{Plan for today}

\begin{list1}
\item Subjects
\begin{list2}
\item Network security
\item Infrastructure security
\item Implement a small scale enterprise network
\end{list2}
\item Exercises -- System Security in Practice
\item Work on our model network, each team has a server and an attacker - reduce attack surface on the server by configuration
\begin{list2}
\item Configure VLAN
\item Configure SSH keys for more secure access
\item Enable firewall
\end{list2}
\end{list1}



\slide{Reading Summary}

\begin{list1}
\item Bishop chapters 28,29,30
\item Part VIII "Practicum" presents examples of how to apply the principles discussed throughout the book. It begins with networks and proceeds to systems, users, and programs. ... Part VIII tries to demonstrate that the material covered elsewhere can be, and should be, used in practice.

\item Chapter 28 Network Security
\item Chapter 29 System Security
\item Chapter 30 User Security
\end{list1}


\slide{Network Security}

\begin{list2}
\item Goals of the Drib's security policy
\item Data related to company plans is to be kept secret. In particular sensitive corporate data. available only to those who need to know.
\item When a customer provides data to the Drib as part of a purchase, the data and all information about the customer, are to be available only to those who fill the order. Company analysts may obtain statistics about a number of orders for planning purposes.
\item Releasing sensitive data requires the consent of the company's officials and lawyers.
\end{list2}

Shortened a bit from the book.

\slide{Steps done by the book}

\begin{list1}
\item Describe the organization - three main internal organizations: CSG, DG, CG
\item Define data classes:
\begin{list2}
\item Public data,
\item Development data for existing products
\item Development data for future products
\item Corporate data
\item Customer data
\end{list2}
\item User classes: Outsiders, Developers, Corporation executives, Employees
\item Rules for data and user access to data
\end{list1}


\slide{The classes of users, data and their allowed accesses}

The classes of users, data and their allowed accesses

\begin{table}[]
\begin{tabular}{lcccc}
  & {\bf Outsiders} & {\bf Developers} & {\bf Corporation Executives} & {\bf Employees }\\
Public data  & Read & Read & Read &  Read\\
Development data existing products &  & Read & Read &  \\
Development data for future products &  & Read, Write & Read &  \\
Corporate data &  &  & Read, Write &  \\
Customer data & Write &  & Read & Read, Write
\end{tabular}
\end{table}

This is an access control matrix combining elements of confidentiality and integrity, compare to our models from earlier chapters.

Book defines transformation rules how specific classes of people can move data from one class to another.

Corporate officers want the systems to be available for 99\% of the time, leaving the last 1\% for planned maintenance and unexpected downtimes.

\slide{Network Organization -- the DMZ }

\hlkimage{13cm}{firma-netvaerk.pdf}
\begin{list1}
\item {\bf Definition 28-1} The \emph{DMZ} is a portion of the network that separates a purely internal network from an external network.
\item The drawing in the book was how people did it before year 2000 \smiley
\end{list1}

\slide{Network separation}

\hlkimage{13cm}{firma-netvaerk-wlan.pdf}


\begin{list1}
\item Often even more DMZ like networks needed: guests, partners, support from vendors, Voice over IP systems etc.
\item {\bf BTW NAT is NOT a security feature}
\end{list1}


\slide{Network Servers}

\begin{list1}
\item Mail servers , local mailserver gets internet mail through 3rd party - does filtering, anti-spam etc. OR outsourced email at some vendor
\item Web serves - most companies with basic web pages outsource these to some hosting company
\item Companies which provide service over internet has a whole infrastructure separated from their local network, most likely at hosting provider or cloud provider
\item DMZ DNS server, split DNS etc. Dont run authoritative DNS yourself, not worth the time. Do run local resolvers for your clients. DNS resolver can also be configured with block lists, blocked Top-level Domains etc.
\item DMZ log server - do run log servers, or at least local forwarding proxies that can collect data even when network is down and forward
\item Above is how I see this most often -- in Denmark at least
\end{list1}


\slide{User Security}

\begin{list1}
\item
\item
\item
\end{list1}




\slide{}

\begin{list1}
\item
\item
\item
\end{list1}


\slide{}

\begin{list1}
\item
\item
\item
\end{list1}


\slide{Produktionsmodning af miljøer}

\begin{list1}
\item Tænk på det miljø som servere og services skal udsættes for
\item Sørg for hærdning og tænk generel sikring:
  \begin{list2}
  \item Opdateret software - ingen kendte sikkerhedshuller eller
  sårbarheder
\item Fjern {\bfseries single points of failure} - redundant strøm, ekstra enheder, to DNS servere fremfor en
\item Adskilte servere - interne og eksterne til forskellige formål\\
Eksempelvis den interne postserver hvor alle e-mail opbevares og en
DMZ-postserver til ekstern post
\item Lav filtre på netværket, eller på data - firewalls og proxy
  funktioner
\item Begræns adgangen til at læse information
\item Begræns adgangen til at skrive information - eksempelvis databaser
\item Brug {\bfseries least privileges} - sørg for at programmer og brugere
  kun har de nødvendige rettigheder til at kunne udføre opgaver
\item Følg med på områderne der har relevans for virksomheden og
  \emph{jeres} installation
  \end{list2}
  \item Meld jer på security mailinglister for de produkter I benytter, også open source
\end{list1}


\slide{Change management}

\begin{list1}
\item Er der tilstrækkeligt med fokus på software i produktion
\item Kan en vilkårlig server nemt reetableres
\item Foretages rettelser direkte på produktionssystemer
\item Er der fall-back plan
\item Burde være god systemadministrator praksis
\end{list1}



\slide{Fundamentet skal være iorden}

\begin{list1}
\item Sørg for at den infrastruktur som I bygger på er sikker:
\begin{list2}
 \item redundans
       \item opdateret
        \item dokumenteret
        \item nem at vedligeholde
\end{list2}

\item  Husk tilgængelighed er også en sikkerhedsparameter
\end{list1}
\slide{Fokus 2019}

\begin{list2}
\item Brugerstyring
\item Asset management
\item Laptop sikkerhed
\item VPN alle steder
\item Penetration testing
\item Firewalls og segmentering
\item TLS og VPN indstillinger
\item DNS og email
\item Syslog og monitorering
\item Incident Response og reaktion
\end{list2}

Check eventuelt IT sikkerhedsupdate 2019 præsentationen:\\
{\small\link{https://github.com/kramse/security-courses/tree/master/presentations/misc/it-sikkerhedsupdate-2019}}

\slide{Design a robust network Isolation and segmentation}

\begin{list1}
\item Hvad kan man gøre for at få bedre netværkssikkerhed?
\begin{list2}
\item Bruge switche - der skal ARP spoofes og bedre performance
\item Opdele med firewall til flere DMZ zoner for at holde
      udsatte servere adskilt fra hinanden, det interne netværk og
      Internet
\item Overvåge, læse logs og reagere på hændelser
\end{list2}
\item Husk du skal også kunne opdatere dine servere
\end{list1}

\slide{Basic Network Security Pattern Isolate in VLANs}

\hlkimage{10cm}{images/demo-netvaerk.pdf}

\begin{list1}
\item Du bør opdele dit netværk i segmenter efter trafik
\item Du bør altid holde interne og eksterne systemer adskilt!
\item Du bør isolere farlige services i jails og chroots
\item Brug port security til at sikre basale services DHCP, Spanning Tree osv.
\end{list1}


\slide{Our Networks}

We will now configure networks, using our sample switch TP-Link T1500G-10PS

\begin{list1}
\item Core network provides uplink through a switch / internet exchange
\item Each team will need:
\begin{list2}
\item A switch TP-Link T1500G-10PS L2 features - default config
\item USB Ethernet - or VLAN compatible virtualization network
\item Ethernet cables
\end{list2}
\item Network will provide:
\begin{list2}
\item A shared switch TP-Link KramsIX for connecting teams
\item Usual routed infrastructure - uplink to Internet
\item Network services
\end{list2}

\end{list1}


\slide{Exercises -- security in practice}

\begin{list1}
\item Work on our model network, each team has a server and an attacker - reduce attack surface on the server by configuration.
\begin{list2}
\item Configure VLAN on switch for the uplink
\item   Enable central logging
\item Configure SSH keys for more secure access
\item Enable firewall
\end{list2}
\end{list1}

\slide{Exercise switch config}

\begin{list1}
\item Each team will configure:
\begin{list2}
\item Managed switch
\item Configure uplink port to be a tagged VLAN trunk
\item Configure port to connect to local Debian server, if tagged Debian must be configured with tag too! Access port is without tag.
\item Insert USB into Debian server virtual machine
\end{list2}
\end{list1}

Use the guides from:\\
{\small \link{https://www.tp-link.com/uk/support/download/t1500g-10ps/\#Related-Documents}}





\exercise{ex:switch-config-vlan}

\exercise{ex:central-logging}

\exercise{ex:config-ssh-keys}

\exercise{ex:debian-firewall}



\slidenext

\end{document}
